
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ludo Board</title>
    <link rel="stylesheet" href="ludostyle.css">
</head>
<body>
    <h1 class="heading">-:LUDO BOARD:-</h1>

    <!-- Player and Difficulty Selectors -->
    <div style="text-align:center; margin: 20px;">
        <label for="numPlayers">Number of Players: </label>
        <select id="numPlayers">
            <option value="1">1</option>
            <option value="2" selected>2</option>
            <option value="3">3</option>
            <option value="4">4</option>
        </select>
        &nbsp;&nbsp;&nbsp;
        <label for="difficulty">Select Difficulty: </label>
        <select id="difficulty">
            <option value="easy">Easy</option>
            <option value="medium" selected>Medium</option>
            <option value="hard">Hard</option>
        </select>
    </div>

    <!-- Current Turn -->
    <div id="turnDisplay" style="text-align:center; font-size:20px; margin-bottom:10px;">Current Turn: Player 1</div>

    <div class="game">
        <div class="house green">
            <div class="box">
                <div class="square square-one green"></div>
                <div class="square square-two green"></div>
                <div class="square square-three green"></div>
                <div class="square square-four green"></div>
            </div>
        </div>
        <div class="house yellow" style="right: 0">
            <div class="box">
                <div class="square square-one yellow"></div>
                <div class="square square-two yellow"></div>
                <div class="square square-three yellow"></div>
                <div class="square square-four yellow"></div>
            </div>
        </div>
        <div class="house red" style="bottom: 0">
            <div class="box">
                <div class="square square-one red"></div>
                <div class="square square-two red"></div>
                <div class="square square-three red"></div>
                <div class="square square-four red"></div>
            </div>
        </div>
        <div class="house blue" style="bottom: 0;right: 0">
            <div class="box">
                <div class="square square-one blue"></div>
                <div class="square square-two blue"></div>
                <div class="square square-three blue"></div>
                <div class="square square-four blue"></div>
            </div>
        </div>
    </div>

    <!-- Question & Dice Result Display -->
    <div id="questionBox" style="display:none; text-align:center; margin-top: 20px;"></div>
    <div id="diceResult" style="text-align:center; font-size: 24px; margin-top: 10px;"></div>

    <script>
    let questions = [];
    let startTime;
    let currentPlayer = 1;
    let totalPlayers = 2;

    fetch('questions.csv')
        .then(response => response.text())
        .then(csv => {
            const lines = csv.trim().split('\n').slice(1);
            questions = lines.map(line => {
                const [difficulty, question, A, B, C, D, answer] = line.split(',');
                return { difficulty, question, A, B, C, D, answer: answer.trim() };
            });
        });

    function showQuestion() {
        const level = document.getElementById("difficulty").value;
        const filtered = questions.filter(q => q.difficulty === level);
        const q = filtered[Math.floor(Math.random() * filtered.length)];
        const isBot = totalPlayers === 1 && currentPlayer === 2;

        if (isBot) {
            // Bot answers randomly after short delay
            setTimeout(() => {
                const choices = ['A', 'B', 'C', 'D'];
                const botChoice = choices[Math.floor(Math.random() * 4)];
                submitAnswer(botChoice, q.answer);
            }, 1500);
            return;
        }

        const box = document.getElementById("questionBox");
        box.innerHTML = `
            <p><strong>${q.question}</strong></p>
            <button onclick="submitAnswer('A', '${q.answer}')">${q.A}</button>
            <button onclick="submitAnswer('B', '${q.answer}')">${q.B}</button>
            <button onclick="submitAnswer('C', '${q.answer}')">${q.C}</button>
            <button onclick="submitAnswer('D', '${q.answer}')">${q.D}</button>
        `;
        box.style.display = 'block';
        startTime = new Date().getTime();
    }

    function submitAnswer(choice, correct) {
        const timeTaken = (new Date().getTime() - startTime) / 1000;
        const box = document.getElementById("questionBox");
        box.style.display = 'none';

        let diceVal = 1;
        if (choice === correct) {
            if (timeTaken <= 5) diceVal = 6;
            else if (timeTaken <= 10) diceVal = 5;
            else if (timeTaken <= 15) diceVal = 4;
            else if (timeTaken <= 20) diceVal = 3;
            else if (timeTaken <= 25) diceVal = 2;
        }

        document.getElementById("diceResult").innerText = `Player ${currentPlayer} got: ${diceVal}`;
        nextTurn();
    }

    function nextTurn() {
        const numPlayersSelect = document.getElementById("numPlayers");
        totalPlayers = parseInt(numPlayersSelect.value);
        currentPlayer++;
        if (currentPlayer > totalPlayers) currentPlayer = 1;
        document.getElementById("turnDisplay").innerText = "Current Turn: Player " + currentPlayer;

        // Auto trigger for bot
        if (totalPlayers === 1 && currentPlayer === 2) {
            setTimeout(showQuestion, 1000);
        }
    }

    document.addEventListener('DOMContentLoaded', () => {
        document.body.addEventListener('click', function (e) {
            if (e.target.id === 'dice' || e.target.classList.contains('dice')) {
                showQuestion();
            }
        });

        document.getElementById("numPlayers").addEventListener('change', () => {
            currentPlayer = 1;
            document.getElementById("turnDisplay").innerText = "Current Turn: Player " + currentPlayer;
        });
    });
    </script>

</body>
</html>
